@model IEnumerable<CMS.Domain.ViewModels.PostViewModel>

@{
    ViewData["Title"] = "Dashboard";
}


   
<br/>
<div id="main">
    <div class="row">
        <div class="col-xl-3 col-sm-6 mb-3" style="height: 125px;">
            <div class="card text-white bg-primary o-hidden h-100">
                <div class="card-body">
                    <div class="card-body-icon" style="margin-top: 11px;margin-right: 5%;">
                        <i class="fa fa-fw fa-envelope"></i>
                    </div>
                    <div class="mr-5">You have posted @Model.Count() times</div>
                </div>
                <a class="card-footer text-white clearfix small z-1" href="#">
                    <span class="float-left">View Your Posts</span>
                    <span class="float-right">
                        <i class="fa fa-angle-right"></i>
                    </span>
                </a>
            </div>
        </div>

        <div class="col-xl-3 col-sm-6 mb-3" style="height: 125px;">
            <div class="card text-white bg-success o-hidden h-100">
                <div class="card-body">
                    <div class="card-body-icon" style="margin-top: 11px;margin-right: 5%;">
                        <i class="fa fa-fw fa-comments"></i>
                    </div>
                    <div class="mr-5">You have commented @Model.Count() times</div>
                </div>
                <a class="card-footer text-white clearfix small z-1" href="#">
                    <span class="float-left">View Posts You Might Like</span>
                    <span class="float-right">
                        <i class="fa fa-angle-right"></i>
                    </span>
                </a>
            </div>
        </div>

        <div class="col-xl-3 col-sm-6 mb-3" style="height: 125px;">
            <div class="card text-white bg-warning o-hidden h-100">
                <div class="card-body">
                    <div class="card-body-icon" style="margin-top: 11px;margin-right: 5%;">
                        <i class="fa fa-fw fa-send"></i>
                    </div>
                    <div class="mr-5">@Model.Count() comments are pending for approval</div>
                </div>
                <a class="card-footer text-white clearfix small z-1" href="#">
                    <span class="float-left">View Pending Comments</span>
                    <span class="float-right">
                        <i class="fa fa-angle-right"></i>
                    </span>
                </a>
            </div>
        </div>

        <div class="col-xl-3 col-sm-6 mb-3" style="height: 125px;">
            <div class="card text-white bg-danger o-hidden h-100">
                <div class="card-body">
                    <div class="card-body-icon" style="margin-top: 11px;margin-right: 5%;">
                        <i class="fa fa-fw fa-list-alt"></i>
                    </div>
                    <div class="mr-5">Your last post has @Model.Count() comments</div>
                </div>
                <a class="card-footer text-white clearfix small z-1" href="#">
                    <span class="float-left">View Your Last Post</span>
                    <span class="float-right">
                        <i class="fa fa-angle-right"></i>
                    </span>
                </a>
            </div>
        </div>
    </div>
    <div class="panel ">
        @foreach (var post in Model)
        {

            <div class="panel-body">
                <div style="width:30%; float:left" ;>
                    @if (String.IsNullOrEmpty(post.Url))
                    {
                        <img src="@Url.Content(@post.FeaturedImageUrl)" class="img-thumbnail" />

                    }
                    else if (String.IsNullOrEmpty(post.FeaturedImageUrl))
                    {
                        string d = "http://img.youtube.com/vi/" + @post.Url + "/maxresdefault.jpg";
                        <img id="img" class="img-thumbnail" src="@d" />
                    }
                    else if (String.IsNullOrEmpty(post.Url) && String.IsNullOrEmpty(post.FeaturedImageUrl))
                    {
                        <img src="@Url.Content("~/Imagefiles/imgnotfound.png")" class="img-thumbnail" />
                    }
                </div>
                <div style="width:67%; float:right;">

                    <h4> <b>@post.Title </b></h4>
                    <font size="2">
                        <b><i>Created By</i></b> @post.Author
                        <b><i>Time</i></b> @post.CreatedDate
                    </font>


                    @{
                        string x = post.Content;

                        if (x != null && x.Length > 300)
                        {
                            x = x.Substring(0, 300);
                        }
                    }

                    @Html.Raw(x)<b> . . .</b>
                    <a asp-action="Postview" asp-route-id="@post.PostID"> View more</a>
                    <br />


                    @foreach (var terms in @post.Terms)
                    {

                        if (terms.Type.Equals("0"))
                        {
                            <a asp-action="Postview" asp-route-id="@terms.TermID"><span class="label label-primary"> @terms.Content</span></a>
                        }
                        else
                        {
                            <a asp-action="Postview" asp-route-id="@terms.TermID"><span class="label label-success"> @terms.Content</span></a>
                        }

                    }

                </div>
            </div>
        }
    </div>
</div>



@section scripts {

<script type="text/javascript">
        $(document).ready(function () {
            $(".txt_truncate").each(function (i) {
                var len = $(this).text().trim().length;
                if (len > 200) {
                    $(this).text($(this).text().substr(0, 200) + '...');
                }
            });
        });


        function openNav() {
                document.getElementById("mySidenav").style.width = "240px";
        }

        function closeNav() {
                document.getElementById("mySidenav").style.width = "0";
        }

        
</script>

}